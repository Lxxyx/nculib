{"version":3,"sources":["webpack:///static/js/app.cab175d6e7988e0740f0.js","webpack:///./src/main.js","webpack:///App.vue","webpack:///./src/App.vue?2caf","webpack:///./src/App.vue"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_vue","_vue2","_mintUi","_mintUi2","_vueResource","_vueResource2","_App","_App2","use","el","components","App","Object","defineProperty","value","_stringify","_stringify2","filter","val","replace","data","stuId","isLogin","operate","showOperate","showAdd","showDel","showSave","showMail","user","books","addBook","computed","addBookState","this","length","emailState","re","email","test","methods","login","_this","$http","get","then","res","booksInfo","Indicator","open","Toast","message","_this2","post","forEach","index","location","close","addSub","delSub","delBook","splice","addMail","save","saveBooks","ctx","saveEmail","_this3","includes","push","__vue_script__","__vue_template__","options","template"],"mappings":"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","file":"static/js/app.cab175d6e7988e0740f0.js","sourcesContent":["webpackJsonp([2,0],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _mintUi = __webpack_require__(3);\n\t\n\tvar _mintUi2 = _interopRequireDefault(_mintUi);\n\t\n\tvar _vueResource = __webpack_require__(14);\n\t\n\tvar _vueResource2 = _interopRequireDefault(_vueResource);\n\t\n\tvar _App = __webpack_require__(13);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\t__webpack_require__(9);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.use(_mintUi2.default);\n\t_vue2.default.use(_vueResource2.default);\n\t\n\tnew _vue2.default({\n\t  el: 'body',\n\t  components: { App: _App2.default }\n\t});\n\n/***/ },\n/* 1 */,\n/* 2 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 3 */,\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _stringify = __webpack_require__(5);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _mintUi = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.filter('title', function (val) {\n\t  return val.replace(';', '');\n\t});\n\texports.default = {\n\t  data: function data() {\n\t    return {\n\t      stuId: '',\n\t      isLogin: false,\n\t      operate: '',\n\t      showOperate: false,\n\t      showAdd: false,\n\t      showDel: false,\n\t      showSave: false,\n\t      showMail: false,\n\t      user: {},\n\t      books: [],\n\t      addBook: ''\n\t    };\n\t  },\n\t\n\t  computed: {\n\t    addBookState: function addBookState() {\n\t      if (!this.addBook.length) {\n\t        return '';\n\t      }\n\t      if (this.addBook.length === 10) {\n\t        return 'success';\n\t      }\n\t      return 'error';\n\t    },\n\t    emailState: function emailState() {\n\t      var re = /@./i;\n\t      if (this.user.email === '') return '';\n\t      if (re.test(this.user.email)) {\n\t        return 'success';\n\t      }\n\t      return 'error';\n\t    }\n\t  },\n\t  methods: {\n\t    login: function login(stuId) {\n\t      var _this = this;\n\t\n\t      this.$http.get('/api/users/' + this.stuId).then(function (res) {\n\t        return res.data;\n\t      }).then(function (data) {\n\t        _this.user = data;\n\t        _this.isLogin = true;\n\t        _this.booksInfo(data.books);\n\t        _mintUi.Indicator.open('正在加载书籍情况中，请稍等');\n\t      }).catch(function () {\n\t        (0, _mintUi.Toast)({\n\t          message: '您的输入不合法，请重新输入！'\n\t        });\n\t      });\n\t    },\n\t    booksInfo: function booksInfo(books) {\n\t      var _this2 = this;\n\t\n\t      this.user.books = books;\n\t      this.$http.post('/api/lib', (0, _stringify2.default)(books)).then(function (res) {\n\t        return res.data;\n\t      }).then(function (data) {\n\t        data.forEach(function (val, index) {\n\t          data[index].location = '馆藏地址：' + val.location;\n\t        });\n\t        _this2.books = data;\n\t        _this2.showOperate = true;\n\t        _mintUi.Indicator.close();\n\t      });\n\t    },\n\t    addSub: function addSub() {\n\t      this.showAdd = true;\n\t      this.showSave = true;\n\t      this.operate = 'add';\n\t    },\n\t    delSub: function delSub() {\n\t      this.showDel = true;\n\t      this.showSave = true;\n\t      this.operate = 'del';\n\t    },\n\t    delBook: function delBook(index) {\n\t      this.books.splice(index, 1);\n\t      this.user.books.splice(index, 1);\n\t    },\n\t    addMail: function addMail() {\n\t      this.showSave = true;\n\t      this.showMail = true;\n\t      this.operate = 'mail';\n\t    },\n\t    save: function save(operate) {\n\t      var _this3 = this;\n\t\n\t      function saveBooks(ctx) {\n\t        ctx.$http.post('/api/users/' + ctx.stuId + '/books', (0, _stringify2.default)(ctx.user.books)).then(function (res) {\n\t          return res.data;\n\t        }).then(function () {\n\t          (0, _mintUi.Toast)({\n\t            message: '保存成功'\n\t          });\n\t          ctx.showDel = false;\n\t          ctx.showSave = false;\n\t          ctx.operate = '';\n\t          _mintUi.Indicator.close();\n\t        });\n\t      }\n\t      function saveEmail(ctx) {\n\t        ctx.$http.post('/api/users/' + ctx.stuId + '/email', (0, _stringify2.default)({ email: ctx.user.email })).then(function (res) {\n\t          return res.data;\n\t        }).then(function () {\n\t          (0, _mintUi.Toast)({\n\t            message: '保存邮箱成功'\n\t          });\n\t          ctx.showMail = false;\n\t          ctx.showSave = false;\n\t          ctx.operate = '';\n\t          _mintUi.Indicator.close();\n\t        });\n\t      }\n\t      if (this.operate === 'add') {\n\t        if (!this.addBook) {\n\t          this.showAdd = false;\n\t          this.showSave = false;\n\t          return false;\n\t        }\n\t        _mintUi.Indicator.open('正在保存');\n\t        this.$http.post('/api/lib', (0, _stringify2.default)([this.addBook])).then(function (res) {\n\t          return res.data;\n\t        }).then(function (data) {\n\t          if (data.includes('Error')) {\n\t            (0, _mintUi.Toast)({\n\t              message: '书籍号有误，请检查重试'\n\t            });\n\t            _mintUi.Indicator.close();\n\t          } else {\n\t            _this3.user.books.push(_this3.addBook);\n\t            saveBooks(_this3);\n\t            _this3.showAdd = false;\n\t            _this3.books.push(data[0]);\n\t            _this3.addBook = '';\n\t          }\n\t        });\n\t      } else if (this.operate === 'mail') {\n\t        _mintUi.Indicator.open('正在保存');\n\t        saveEmail(this);\n\t      } else {\n\t        saveBooks(this);\n\t      }\n\t    }\n\t  }\n\t};\n\n/***/ },\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 11 */,\n/* 12 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div id=app> <mt-header title=图书馆订阅系统 style=\\\"font-size: 20px\\\"></mt-header> <div class=login v-if=!isLogin> <mt-field label=学号 placeholder=请输入学号 type=text :value.sync=stuId></mt-field> <mt-button class=login-button size=large type=primary @click=login(this.value)> 登陆 </mt-button> </div> <div class=book-cell> <mt-cell v-for=\\\"ele in books\\\" :title=\\\"ele.title | title\\\" :label=ele.location> <span style=\\\"color: green\\\" v-if=ele.canBorrowNum> 可借: {{ele.canBorrowNum}} </span> <span v-else=!ele.canBorrowNum> 可借: {{ele.canBorrowNum}} </span> <span class=\\\"mint-field-state is-error\\\" v-if=showDel @click=delBook($index)> <i class=\\\"mintui mintui-field-error\\\"></i> </span> </mt-cell> </div> <div class=book-add v-if=showAdd> <mt-field label=书籍号 placeholder=\\\"eg: 0000805778\\\" :state=addBookState :value.sync=addBook> </mt-field> </div> <div class=set-mail v-if=showMail> <mt-field label=邮箱 placeholder=用于提醒你有书可借 type=text :state=emailState :value.sync=user.email> </mt-field> </div> <div class=operate v-if=showOperate> <mt-button type=primary size=normal v-if=!showSave @click=addSub>增加订阅</mt-button> <mt-button type=danger size=normal v-if=!showSave @click=delSub>删除订阅</mt-button> <mt-button style=width:91% type=primary plain v-if=!showSave @click=addMail> 设置邮箱 </mt-button> <mt-button style=\\\"background-color: #4CAF50; width:92%\\\" type=primary v-if=showSave @click=save> 保存 </mt-button> </div> </div>\";\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__webpack_require__(10)\n\t__vue_script__ = __webpack_require__(4)\n\t__vue_template__ = __webpack_require__(12)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** static/js/app.cab175d6e7988e0740f0.js\n **/","import Vue from 'vue'\nimport Mint from 'mint-ui'\nimport VueResource from 'vue-resource'\nimport App from './App'\nimport 'mint-ui/lib/style.css'\n\nVue.use(Mint)\nVue.use(VueResource)\n/* eslint-disable no-new */\nnew Vue({\n  el: 'body',\n  components: { App }\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","<template>\n  <div id=\"app\">\n    <mt-header title=\"图书馆订阅系统\" style=\"font-size: 20px\"></mt-header>\n\n    <div class=\"login\" v-if=\"!isLogin\">\n      <mt-field \n        label=\"学号\" \n        placeholder=\"请输入学号\" \n        type=\"text\" \n        :value.sync=\"stuId\" \n      ></mt-field>\n      <mt-button \n        class=\"login-button\" \n        size=\"large\" \n        type=\"primary\" \n        @click=\"login(this.value)\" \n      >\n        登陆\n      </mt-button>\n    </div>\n\n    <div class=\"book-cell\">\n      <mt-cell \n        v-for=\"ele in books\" \n        :title=\"ele.title | title\"\n        :label='ele.location'\n      >\n        <span style=\"color: green\" v-if=\"ele.canBorrowNum\">\n          可借: {{ele.canBorrowNum}}\n        </span>\n        <span v-else=\"!ele.canBorrowNum\">\n          可借: {{ele.canBorrowNum}}\n        </span>\n        <span\n          class=\"mint-field-state is-error\"\n          v-if=\"showDel\"\n          @click=\"delBook($index)\"\n          >\n          <i class=\"mintui mintui-field-error\"></i>\n        </span>\n      </mt-cell>\n    </div>\n\n    <div class=\"book-add\" v-if=\"showAdd\">\n      <mt-field\n        label=\"书籍号\"\n        placeholder=\"eg: 0000805778\"\n        :state=\"addBookState\"\n        :value.sync=\"addBook\"\n      >\n      </mt-field>\n    </div>\n\n    <div class=\"set-mail\" v-if=\"showMail\">\n      <mt-field\n        label=\"邮箱\"\n        placeholder=\"用于提醒你有书可借\"\n        type=\"text\"\n        :state=\"emailState\"\n        :value.sync=\"user.email\"\n      >\n      </mt-field>\n    </div>\n\n    <div class=\"operate\" v-if=\"showOperate\">\n      <mt-button \n        type=\"primary\" \n        size=\"normal\"\n        v-if=\"!showSave\"\n        @click=\"addSub\"\n      >增加订阅</mt-button>\n      <mt-button\n        type=\"danger\"\n        size=\"normal\"\n        v-if=\"!showSave\"\n        @click=\"delSub\"\n      >删除订阅</mt-button>\n      <mt-button\n        style=\"width:91%;\"\n        type=\"primary\"\n        plain\n        v-if=\"!showSave\"\n        @click=\"addMail\"\n      >\n        设置邮箱\n      </mt-button>\n      <mt-button\n        style=\"background-color: #4CAF50; width:92%;\"\n        type=\"primary\"\n        v-if=\"showSave\"\n        @click=\"save\"\n      >\n        保存\n      </mt-button>\n    </div>\n\n  </div>\n</template>\n\n<script>\n  import Vue from 'vue'\n  import { Toast, Indicator } from 'mint-ui'\n  Vue.filter('title', val => val.replace(';', ''))\n  // Vue.filter('title', val => {\n  //   return val.replace(';', '').replace('《', '').replace('》', '')\n  // })\n  export default {\n    data () {\n      return {\n        stuId: '',\n        isLogin: false,\n        operate: '',\n        showOperate: false,\n        showAdd: false,\n        showDel: false,\n        showSave: false,\n        showMail: false,\n        user: {},\n        books: [],\n        addBook: ''\n      }\n    },\n    computed: {\n      addBookState () {\n        if (!this.addBook.length) {\n          return ''\n        }\n        if (this.addBook.length === 10) {\n          return 'success'\n        }\n        return 'error'\n      },\n      emailState () {\n        let re = /@./i\n        if (this.user.email === '') return ''\n        if (re.test(this.user.email)) {\n          return 'success'\n        }\n        return 'error'\n      }\n    },\n    methods: {\n      login (stuId) {\n        this.$http.get(`/api/users/${this.stuId}`)\n        .then(res => res.data)\n        .then(data => {\n          this.user = data\n          this.isLogin = true\n          this.booksInfo(data.books)\n          Indicator.open('正在加载书籍情况中，请稍等')\n        })\n        .catch(() => {\n          Toast({\n            message: '您的输入不合法，请重新输入！'\n          })\n        })\n      },\n      booksInfo (books) {\n        // books.push('0000826392', '0000805778')\n        this.user.books = books\n        this.$http.post('/api/lib', JSON.stringify(books))\n        .then(res => res.data)\n        .then(data => {\n          data.forEach((val, index) => {\n            data[index].location = `馆藏地址：${val.location}`\n          })\n          this.books = data\n          this.showOperate = true\n          Indicator.close()\n        })\n      },\n      addSub () {\n        this.showAdd = true\n        this.showSave = true\n        this.operate = 'add'\n      },\n      delSub () {\n        this.showDel = true\n        this.showSave = true\n        this.operate = 'del'\n      },\n      delBook (index) {\n        this.books.splice(index, 1)\n        this.user.books.splice(index, 1)\n      },\n      addMail () {\n        this.showSave = true\n        this.showMail = true\n        this.operate = 'mail'\n      },\n      save (operate) {\n        function saveBooks (ctx) {\n          ctx.$http.post(`/api/users/${ctx.stuId}/books`, JSON.stringify(ctx.user.books))\n          .then(res => res.data)\n          .then(() => {\n            Toast({\n              message: '保存成功'\n            })\n            ctx.showDel = false\n            ctx.showSave = false\n            ctx.operate = ''\n            Indicator.close()\n          })\n        }\n        function saveEmail (ctx) {\n          ctx.$http.post(`/api/users/${ctx.stuId}/email`, JSON.stringify({email: ctx.user.email}))\n          .then(res => res.data)\n          .then(() => {\n            Toast({\n              message: '保存邮箱成功'\n            })\n            ctx.showMail = false\n            ctx.showSave = false\n            ctx.operate = ''\n            Indicator.close()\n          })\n        }\n        if (this.operate === 'add') {\n          if (!this.addBook) {\n            this.showAdd = false\n            this.showSave = false\n            return false\n          }\n          Indicator.open('正在保存')\n          this.$http.post('/api/lib', JSON.stringify([this.addBook]))\n          .then(res => res.data)\n          .then(data => {\n            if (data.includes('Error')) {\n              Toast({\n                message: '书籍号有误，请检查重试'\n              })\n              Indicator.close()\n            } else {\n              this.user.books.push(this.addBook)\n              saveBooks(this)\n              this.showAdd = false\n              this.books.push(data[0])\n              this.addBook = ''\n            }\n          })\n        } else if (this.operate === 'mail') {\n          Indicator.open('正在保存')\n          saveEmail(this)\n        } else {\n          saveBooks(this)\n        }\n      }\n    }\n  }\n</script>\n\n<style>\n  body {\n    overflow-x: hidden;\n  }\n  .login {\n    position: absolute;\n    margin-top: 50%;\n    margin-left: 50%;\n    transform: translate(-50%, -50%);\n  }\n  .login-button {\n    margin-top: 5px;\n  }\n  .book-add {\n    margin: 5px 0;\n  }\n  .operate {\n    text-align: center;\n    margin-top: 5px;\n  }\n  .operate a {\n    width: 45%;\n  }\n</style>\n\n\n\n/** WEBPACK FOOTER **\n ** App.vue?60d6d4b0\n **/","module.exports = \"<div id=app> <mt-header title=图书馆订阅系统 style=\\\"font-size: 20px\\\"></mt-header> <div class=login v-if=!isLogin> <mt-field label=学号 placeholder=请输入学号 type=text :value.sync=stuId></mt-field> <mt-button class=login-button size=large type=primary @click=login(this.value)> 登陆 </mt-button> </div> <div class=book-cell> <mt-cell v-for=\\\"ele in books\\\" :title=\\\"ele.title | title\\\" :label=ele.location> <span style=\\\"color: green\\\" v-if=ele.canBorrowNum> 可借: {{ele.canBorrowNum}} </span> <span v-else=!ele.canBorrowNum> 可借: {{ele.canBorrowNum}} </span> <span class=\\\"mint-field-state is-error\\\" v-if=showDel @click=delBook($index)> <i class=\\\"mintui mintui-field-error\\\"></i> </span> </mt-cell> </div> <div class=book-add v-if=showAdd> <mt-field label=书籍号 placeholder=\\\"eg: 0000805778\\\" :state=addBookState :value.sync=addBook> </mt-field> </div> <div class=set-mail v-if=showMail> <mt-field label=邮箱 placeholder=用于提醒你有书可借 type=text :state=emailState :value.sync=user.email> </mt-field> </div> <div class=operate v-if=showOperate> <mt-button type=primary size=normal v-if=!showSave @click=addSub>增加订阅</mt-button> <mt-button type=danger size=normal v-if=!showSave @click=delSub>删除订阅</mt-button> <mt-button style=width:91% type=primary plain v-if=!showSave @click=addMail> 设置邮箱 </mt-button> <mt-button style=\\\"background-color: #4CAF50; width:92%\\\" type=primary v-if=showSave @click=save> 保存 </mt-button> </div> </div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/.npminstall/vue-html-loader/1.2.2/vue-html-loader!./~/.npminstall/vue-loader/8.5.2/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n ** module id = 12\n ** module chunks = 2\n **/","var __vue_script__, __vue_template__\nrequire(\"!!./../node_modules/.npminstall/extract-text-webpack-plugin/1.0.1/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../node_modules/.npminstall/vue-loader/8.5.2/vue-loader/lib/style-rewriter.js!./../node_modules/.npminstall/vue-loader/8.5.2/vue-loader/lib/selector.js?type=style&index=0!./App.vue\")\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!./../node_modules/.npminstall/vue-loader/8.5.2/vue-loader/lib/selector.js?type=script&index=0!./App.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../node_modules/.npminstall/vue-loader/8.5.2/vue-loader/lib/selector.js?type=template&index=0!./App.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/App.vue\n ** module id = 13\n ** module chunks = 2\n **/"],"sourceRoot":""}